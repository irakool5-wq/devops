# Домашнее задание к занятию «Резервное копирование баз данных» Алавидзе И.Г.


---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.


*Приведите ответ в свободной форме.*


### Ответ:

1.1 Осуществвить ежедневное полное резервное копирование.
Каждый день необходимо проводить полное копирование всей базы данных, т.к. это финансовая компания, то нужно проводить ночью(после 00:00).
При необходимости восстановления берется последнее полное копирование предыдущего дня.
Плюсы: Простота и быстрое время восстановления.
Минусы:Требует много места для хранения и длительное время выполнения резервного копирования

1.2 В зависимости от объема данных, подойдет комбинация полного резервного копирования с частыми инкрементными или дифференциальными копиями.
 
Если данных не много и интенсивность использования низкая, то полное резервное копирование каждый день с дифференциальным бэкапом каждый час. 
Если данных много и интенсивность использования высокая, то полное резервное копирование каждый день с инкрементным бэкапом каждый час.

При необходимости восстановления применяется последнее полное копирование, затем последовательно инкрементные/дифференциальные до нужного часа. 

Плюсы: Минимальные потери данных и быстрая скорость восстановления.

Минусы: Требует больше ресурсов (процессор, сеть) и места для хранения многочисленных копий.
 
---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

*Приведите ответ в свободной форме.*

### Ответ:

Резервирование данных:
```bash
pg_dump mybd > mydb.sql
```

Резервирование если нестандартный формат: 
```bash
pg_dump -Fc mybd > mydb.dump
```

Резервирование если БД принадлежит другому пользователю:
```bash
pg_dump -U username mybd > mydb.sql
```

Восстановление БД:
```bash
pg_restore -d mybd mybd.sql
```


*Приведите ответ в свободной форме.*

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 


*Приведите ответ в свободной форме.*

### Ответ:


```bash
mysqlbackup --defaults-file=/home/dbadmin/my.cnf \
  --incremental=optimistic --incremental-base=history:last_backup \
  --backup-dir=/home/dbadmin/temp_dir \
  --backup-image=incremental_image1.bi 
   backup-to-image
```


---


